"use strict";!function(){angular.module("app",["ngAnimate","ngMaterial","ngMessages","ui.router","LocalStorageModule","flow"])}(),function(){angular.module("app").config(["flowFactoryProvider",function(t){t.defaults={target:"/upload",permanentErrors:[404,500,501]},t.on("catchAll",function(t){})}])}(),function(){angular.module("app").config(["localStorageServiceProvider",function(t){t.setPrefix("app").setNotify(!0,!0)}])}(),function(){angular.module("app").config(["$stateProvider","$urlRouterProvider",function(t,o){o.otherwise("/"),t.state("main",{url:"/",views:{"":{templateUrl:"./build/templates/main/index.html"},"booksList@main":{templateUrl:"./build/templates/booksList/index.html"}}}).state("main.edit",{url:"book/edit/:id",views:{"booksList@main":{template:""},editBookView:{templateUrl:"./build/templates/editBook/index.html"}}}).state("main.create",{url:"book/create",views:{"booksList@main":{template:""},createBookView:{templateUrl:"./build/templates/createBook/index.html"}}}).state("main.form",{url:"form",views:{"booksList@main":{template:""},createBookView:{templateUrl:"./build/templates/form/index.html"}}})}])}(),function(){function t(){var t=void 0;return{books:t}}angular.module("app").factory("bookStore",t),t.$inject=[]}(),function(){angular.module("app").factory("ngDgPresetsFactory",function(){var t=500,o=500,e={pathColors:{0:"#f58a41",1:"#f0d367",2:"#e64d1b"},svgWidth:t,svgHeight:o,svgStyles:{width:t,height:o,fill:"blue"},svgWrapStyles:{width:t+"px",height:o+"px",overflow:"hidden"},radius:155,animateTime:500,animateStep:1,sRadius:30};return{pathColors:e.pathColors,svgWidth:e.svgWidth,svgHeight:e.svgHeight,svgStyles:e.svgStyles,svgWrapStyles:e.svgWrapStyles,radius:e.radius,animateTime:e.animateTime,animateStep:e.animateStep,sRadius:e.sRadius}})}(),function(){function t(t,o,e,i,a,s){this.$scope=t,this.$http=o,this.$state=e,this.bookStore=a,this.localStorageService=s,this.bookList=this.localStorageService.get("bookList"),this.sortType="name",this.sortReverse=!1,this.init()}angular.module("app").controller("booksListCtrl",t),t.$inject=["$scope","$http","$state","$stateParams","bookStore","localStorageService"],t.prototype.init=function(){console.log("---=== bookList ===---")},t.prototype.editBook=function(t,o){t.preventDefault(),t.stopPropagation(),this.localStorageService.set("editBook",o),this.$state.go("main.edit",{id:o.id})},t.prototype.addBook=function(t){t.preventDefault(),t.stopPropagation(),this.$state.go("main.create")},t.prototype.deleteBook=function(t,o){t.preventDefault(),t.stopPropagation();for(var e=0;e<this.bookList.length;e+=1)o.id===this.bookList[e].id&&this.bookList.splice(e,1);this.localStorageService.set("bookList",this.bookList)},t.prototype.sortBooks=function(t,o){t.preventDefault(),t.stopPropagation(),this.sortType===o?this.sortReverse=!this.sortReverse:this.sortType=o},t.prototype.updateFromJson=function(t){var o=this;t.preventDefault(),t.stopPropagation(),this.$http.get("./src/fixtures/books.json").then(function(t){o.localStorageService.set("bookList",t.data)})}}(),function(){function t(t,o,e,i,a){this.$scope=t,this.$http=o,this.$state=e,this.localStorageService=a,this.init()}angular.module("app").controller("CreateBookCtrl",t),t.$inject=["$scope","$http","$state","$stateParams","localStorageService"],t.prototype.init=function(){this.book=angular.copy(this.localStorageService.get("editBook"))},t.prototype.saveBookCb=function(t){var o=this.localStorageService.get("bookList");t.id="_"+o.length,o.push(t),this.localStorageService.set("bookList",o),this.$state.go("main")}}(),function(){function t(t){this.status="edit",this.$scope=t,this.init()}t.$inject=["$scope"],angular.module("app").controller("drBookEditorCtrl",t),angular.module("app").directive("drBookEditor",function(){function o(t,o,e,i){}return{link:o,restrict:"AEC",scope:{},templateUrl:"./build/templates/drBookEditor/drBookEditor.html",controller:t,controllerAs:"bkEdtr",bindToController:{data:"=?",ctx:"=",mode:"@?",saveCb:"=?"}}}),t.prototype.init=function(){this.mode&&"create"!==this.mode||(this.data={name:"",authors:[["",""]],pages:"",publishing_house:"",publication:"",edition:"",isbn:"",image:""})},t.prototype.processFiles=function(t){var o=this;angular.forEach(t,function(t,e){var i=new FileReader;i.onload=function(t){var e=t.target.result;o.data.image=e,o.$scope.$digest()},i.readAsDataURL(t.file)})},t.prototype.saveCard=function(t){t.preventDefault(),t.stopPropagation(),console.log("---=== this.data ===---",this.data),this.mode&&"create"!=this.mode?this.saveCb.call(this.ctx):this.saveCb.call(this.ctx,this.data)},t.prototype.deleteAuthor=function(t,o){t.preventDefault(),t.stopPropagation(),this.data.authors.splice(o,1)},t.prototype.addAuthor=function(t){t.preventDefault(),t.stopPropagation(),this.data.authors.push(["",""])}}(),function(){function t(t,o,e,i,a){this.$scope=t,this.$http=o,this.$state=e,this.localStorageService=a,this.init()}angular.module("app").controller("EditBookCtrl",t),t.$inject=["$scope","$http","$state","$stateParams","localStorageService"],t.prototype.init=function(){this.book=angular.copy(this.localStorageService.get("editBook"))},t.prototype.saveBookCb=function(){console.log("---=== callback ===---");for(var t=this.localStorageService.get("bookList"),o=0;o<t.length;o+=1)this.book.id==t[o].id&&(t[o]=this.book);this.localStorageService.set("bookList",t),this.localStorageService.remove("editBook"),this.$state.go("main")}}(),function(){function t(t,o,e,i,a,s){this.$scope=t,this.$http=o,this.$state=e,this.bookStore=a,this.localStorageService=s,this.init()}angular.module("app").controller("mainCtrl",t),t.$inject=["$scope","$http","$state","$stateParams","bookStore","localStorageService"],t.prototype.init=function(){console.log("---=== mainCtrl init ===---"),this.getBooks()},t.prototype.getBooks=function(){var t=this;this.localStorageService.get("bookList")||this.$http.get("./src/fixtures/books.json").then(function(o){t.localStorageService.set("bookList",o.data)})}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiZmxvd0ZhY3RvcnlQcm92aWRlciIsImRlZmF1bHRzIiwidGFyZ2V0IiwicGVybWFuZW50RXJyb3JzIiwib24iLCJldmVudCIsImxvY2FsU3RvcmFnZVNlcnZpY2VQcm92aWRlciIsInNldFByZWZpeCIsInNldE5vdGlmeSIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsIiIsInRlbXBsYXRlVXJsIiwiYm9va3NMaXN0QG1haW4iLCJ0ZW1wbGF0ZSIsImVkaXRCb29rVmlldyIsImNyZWF0ZUJvb2tWaWV3IiwiYm9va1N0b3JlIiwiYm9va3MiLCJmYWN0b3J5IiwiJGluamVjdCIsIndpZHRoIiwiaGVpZ2h0IiwicHJlc2V0cyIsInBhdGhDb2xvcnMiLCIwIiwiMSIsIjIiLCJzdmdXaWR0aCIsInN2Z0hlaWdodCIsInN2Z1N0eWxlcyIsImZpbGwiLCJzdmdXcmFwU3R5bGVzIiwib3ZlcmZsb3ciLCJyYWRpdXMiLCJhbmltYXRlVGltZSIsImFuaW1hdGVTdGVwIiwic1JhZGl1cyIsImJvb2tzTGlzdEN0cmwiLCIkc2NvcGUiLCIkaHR0cCIsIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsImxvY2FsU3RvcmFnZVNlcnZpY2UiLCJ0aGlzIiwiYm9va0xpc3QiLCJnZXQiLCJzb3J0VHlwZSIsInNvcnRSZXZlcnNlIiwiaW5pdCIsImNvbnRyb2xsZXIiLCJwcm90b3R5cGUiLCJjb25zb2xlIiwibG9nIiwiZWRpdEJvb2siLCJlIiwiaXRlbSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic2V0IiwiZ28iLCJpZCIsImFkZEJvb2siLCJkZWxldGVCb29rIiwiYm9vayIsImkiLCJsZW5ndGgiLCJzcGxpY2UiLCJzb3J0Qm9va3MiLCJ0eXBlIiwidXBkYXRlRnJvbUpzb24iLCJfdGhpcyIsInRoZW4iLCJyZXNwIiwiZGF0YSIsIkNyZWF0ZUJvb2tDdHJsIiwiY29weSIsInNhdmVCb29rQ2IiLCJuZXdCb29rIiwicHVzaCIsImRyQm9va0VkaXRvckN0cmwiLCJzdGF0dXMiLCJkaXJlY3RpdmUiLCJkckJvb2tFZGl0b3JMaW5rIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCIkdGltZW91dCIsImxpbmsiLCJyZXN0cmljdCIsInNjb3BlIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsImN0eCIsIm1vZGUiLCJzYXZlQ2IiLCJuYW1lIiwiYXV0aG9ycyIsInBhZ2VzIiwicHVibGlzaGluZ19ob3VzZSIsInB1YmxpY2F0aW9uIiwiZWRpdGlvbiIsImlzYm4iLCJpbWFnZSIsInByb2Nlc3NGaWxlcyIsImZpbGVzIiwiZm9yRWFjaCIsImZsb3dGaWxlIiwiZmlsZVJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJ1cmkiLCJyZXN1bHQiLCIkZGlnZXN0IiwicmVhZEFzRGF0YVVSTCIsImZpbGUiLCJzYXZlQ2FyZCIsImNhbGwiLCJkZWxldGVBdXRob3IiLCJpZHgiLCJhZGRBdXRob3IiLCJFZGl0Qm9va0N0cmwiLCJyZW1vdmUiLCJtYWluQ3RybCIsImdldEJvb2tzIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUVBLFdBQ0NBLFFBQVFDLE9BQU8sT0FBUSxZQUFhLGFBQWMsYUFBYyxZQUFhLHFCQUFzQixZQUlwRyxXQUNDRCxRQUFRQyxPQUFPLE9BQU9DLFFBQVEsc0JBQXVCLFNBQVVDLEdBQzlEQSxFQUFvQkMsVUFDbkJDLE9BQVEsVUFDUkMsaUJBQWtCLElBQUssSUFBSyxNQUU3QkgsRUFBb0JJLEdBQUcsV0FBWSxTQUFVQyxZQUsvQyxXQUNDUixRQUFRQyxPQUFPLE9BQU9DLFFBQVEsOEJBQStCLFNBQVVPLEdBQ3RFQSxFQUE0QkMsVUFBVSxPQUFPQyxXQUFVLEdBQU0sU0FLL0QsV0FDQ1gsUUFBUUMsT0FBTyxPQUFPQyxRQUFRLGlCQUFrQixxQkFBc0IsU0FBVVUsRUFBZ0JDLEdBRy9G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SytFLFlBR05ELEVBQVN2RSxVQUFVd0UsU0FBVyxXQUM3QixHQUFJcEQsR0FBUTNCLElBRVBBLE1BQUtELG9CQUFvQkcsSUFBSSxhQUNqQ0YsS0FBS0osTUFBTU0sSUFBSSw2QkFBNkIwQixLQUFLLFNBQVVDLEdBQzFERixFQUFNNUIsb0JBQW9CZ0IsSUFBSSxXQUFZYyxFQUFLQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ25nQW5pbWF0ZScsICduZ01hdGVyaWFsJywgJ25nTWVzc2FnZXMnLCAndWkucm91dGVyJywgJ0xvY2FsU3RvcmFnZU1vZHVsZScsICdmbG93J10pO1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbmZpZyhbJ2Zsb3dGYWN0b3J5UHJvdmlkZXInLCBmdW5jdGlvbiAoZmxvd0ZhY3RvcnlQcm92aWRlcikge1xuXHRcdGZsb3dGYWN0b3J5UHJvdmlkZXIuZGVmYXVsdHMgPSB7XG5cdFx0XHR0YXJnZXQ6ICcvdXBsb2FkJyxcblx0XHRcdHBlcm1hbmVudEVycm9yczogWzQwNCwgNTAwLCA1MDFdXG5cdFx0fTtcblx0XHRmbG93RmFjdG9yeVByb3ZpZGVyLm9uKCdjYXRjaEFsbCcsIGZ1bmN0aW9uIChldmVudCkge30pO1xuXHR9XSk7XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKFtcImxvY2FsU3RvcmFnZVNlcnZpY2VQcm92aWRlclwiLCBmdW5jdGlvbiAobG9jYWxTdG9yYWdlU2VydmljZVByb3ZpZGVyKSB7XG5cdFx0bG9jYWxTdG9yYWdlU2VydmljZVByb3ZpZGVyLnNldFByZWZpeCgnYXBwJykuc2V0Tm90aWZ5KHRydWUsIHRydWUpO1xuXHR9XSk7XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb25maWcoW1wiJHN0YXRlUHJvdmlkZXJcIiwgXCIkdXJsUm91dGVyUHJvdmlkZXJcIiwgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblx0XHR2YXIgcGF0aFRvQ29tcG9uZW50cyA9ICcuL3NyYy9jb21wb25lbnRzLyc7XG5cblx0XHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnbWFpbicsIHtcblx0XHRcdHVybDogJy8nLFxuXHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XCJcIjoge1xuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnLi9idWlsZC90ZW1wbGF0ZXMvbWFpbi9pbmRleC5odG1sJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRcImJvb2tzTGlzdEBtYWluXCI6IHtcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy4vYnVpbGQvdGVtcGxhdGVzL2Jvb2tzTGlzdC9pbmRleC5odG1sJ1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSkuc3RhdGUoJ21haW4uZWRpdCcsIHtcblx0XHRcdHVybDogJ2Jvb2svZWRpdC86aWQnLFxuXHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XCJib29rc0xpc3RAbWFpblwiOiB7XG5cdFx0XHRcdFx0dGVtcGxhdGU6ICcnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwiZWRpdEJvb2tWaWV3XCI6IHtcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy4vYnVpbGQvdGVtcGxhdGVzL2VkaXRCb29rL2luZGV4Lmh0bWwnXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KS5zdGF0ZSgnbWFpbi5jcmVhdGUnLCB7XG5cdFx0XHR1cmw6ICdib29rL2NyZWF0ZScsXG5cdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcImJvb2tzTGlzdEBtYWluXCI6IHtcblx0XHRcdFx0XHR0ZW1wbGF0ZTogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0XCJjcmVhdGVCb29rVmlld1wiOiB7XG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcuL2J1aWxkL3RlbXBsYXRlcy9jcmVhdGVCb29rL2luZGV4Lmh0bWwnXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KS5zdGF0ZSgnbWFpbi5mb3JtJywge1xuXHRcdFx0dXJsOiAnZm9ybScsXG5cdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcImJvb2tzTGlzdEBtYWluXCI6IHtcblx0XHRcdFx0XHR0ZW1wbGF0ZTogJydcblx0XHRcdFx0fSxcblx0XHRcdFx0XCJjcmVhdGVCb29rVmlld1wiOiB7XG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcuL2J1aWxkL3RlbXBsYXRlcy9mb3JtL2luZGV4Lmh0bWwnXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fV0pO1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdib29rU3RvcmUnLCBib29rU3RvcmUpO1xuXG5cdGJvb2tTdG9yZS4kaW5qZWN0ID0gW107XG5cblx0ZnVuY3Rpb24gYm9va1N0b3JlKCkge1xuXHRcdHZhciBib29rcyA9IHZvaWQgMDtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Ym9va3M6IGJvb2tzXG5cdFx0fTtcblx0fVxufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ25nRGdQcmVzZXRzRmFjdG9yeScsIGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgd2lkdGggPSA1MDA7XG5cdFx0dmFyIGhlaWdodCA9IDUwMDtcblxuXHRcdHZhciBwcmVzZXRzID0ge1xuXHRcdFx0cGF0aENvbG9yczogeyAwOiAnI2Y1OGE0MScsIDE6ICcjZjBkMzY3JywgMjogJyNlNjRkMWInIH0sXG5cdFx0XHRzdmdXaWR0aDogd2lkdGgsXG5cdFx0XHRzdmdIZWlnaHQ6IGhlaWdodCxcblx0XHRcdHN2Z1N0eWxlczoge1xuXHRcdFx0XHQnd2lkdGgnOiB3aWR0aCxcblx0XHRcdFx0J2hlaWdodCc6IGhlaWdodCxcblx0XHRcdFx0J2ZpbGwnOiAnYmx1ZSdcblx0XHRcdH0sXG5cdFx0XHRzdmdXcmFwU3R5bGVzOiB7XG5cdFx0XHRcdCd3aWR0aCc6IHdpZHRoICsgJ3B4Jyxcblx0XHRcdFx0J2hlaWdodCc6IGhlaWdodCArICdweCcsXG5cdFx0XHRcdCdvdmVyZmxvdyc6ICdoaWRkZW4nXG5cdFx0XHR9LFxuXHRcdFx0cmFkaXVzOiAxNTUsXG5cdFx0XHRhbmltYXRlVGltZTogNTAwLFxuXHRcdFx0YW5pbWF0ZVN0ZXA6IDEsXG5cdFx0XHRzUmFkaXVzOiAzMFxuXHRcdH07XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cGF0aENvbG9yczogcHJlc2V0cy5wYXRoQ29sb3JzLFxuXHRcdFx0c3ZnV2lkdGg6IHByZXNldHMuc3ZnV2lkdGgsXG5cdFx0XHRzdmdIZWlnaHQ6IHByZXNldHMuc3ZnSGVpZ2h0LFxuXHRcdFx0c3ZnU3R5bGVzOiBwcmVzZXRzLnN2Z1N0eWxlcyxcblx0XHRcdHN2Z1dyYXBTdHlsZXM6IHByZXNldHMuc3ZnV3JhcFN0eWxlcyxcblx0XHRcdHJhZGl1czogcHJlc2V0cy5yYWRpdXMsXG5cdFx0XHRhbmltYXRlVGltZTogcHJlc2V0cy5hbmltYXRlVGltZSxcblx0XHRcdGFuaW1hdGVTdGVwOiBwcmVzZXRzLmFuaW1hdGVTdGVwLFxuXHRcdFx0c1JhZGl1czogcHJlc2V0cy5zUmFkaXVzXG5cdFx0fTtcblx0fSk7XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge30pO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ2Jvb2tzTGlzdEN0cmwnLCBib29rc0xpc3RDdHJsKTtcblxuXHRib29rc0xpc3RDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckaHR0cCcsICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJ2Jvb2tTdG9yZScsICdsb2NhbFN0b3JhZ2VTZXJ2aWNlJ107XG5cblx0ZnVuY3Rpb24gYm9va3NMaXN0Q3RybCgkc2NvcGUsICRodHRwLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgYm9va1N0b3JlLCBsb2NhbFN0b3JhZ2VTZXJ2aWNlKSB7XG5cdFx0dGhpcy4kc2NvcGUgPSAkc2NvcGU7XG5cdFx0dGhpcy4kaHR0cCA9ICRodHRwO1xuXHRcdHRoaXMuJHN0YXRlID0gJHN0YXRlO1xuXHRcdHRoaXMuYm9va1N0b3JlID0gYm9va1N0b3JlO1xuXHRcdHRoaXMubG9jYWxTdG9yYWdlU2VydmljZSA9IGxvY2FsU3RvcmFnZVNlcnZpY2U7XG5cblx0XHR0aGlzLmJvb2tMaXN0ID0gdGhpcy5sb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldCgnYm9va0xpc3QnKTtcblxuXHRcdHRoaXMuc29ydFR5cGUgPSAnbmFtZSc7XG5cdFx0dGhpcy5zb3J0UmV2ZXJzZSA9IGZhbHNlO1xuXG5cdFx0dGhpcy5pbml0KCk7XG5cdH1cblxuXHRib29rc0xpc3RDdHJsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKCctLS09PT0gYm9va0xpc3QgPT09LS0tJyk7XG5cdH07XG5cblx0Ym9va3NMaXN0Q3RybC5wcm90b3R5cGUuZWRpdEJvb2sgPSBmdW5jdGlvbiAoZSwgaXRlbSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0dGhpcy5sb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnZWRpdEJvb2snLCBpdGVtKTtcblx0XHR0aGlzLiRzdGF0ZS5nbygnbWFpbi5lZGl0JywgeyBpZDogaXRlbS5pZCB9KTtcblx0fTtcblxuXHRib29rc0xpc3RDdHJsLnByb3RvdHlwZS5hZGRCb29rID0gZnVuY3Rpb24gKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdHRoaXMuJHN0YXRlLmdvKCdtYWluLmNyZWF0ZScpO1xuXHR9O1xuXG5cdGJvb2tzTGlzdEN0cmwucHJvdG90eXBlLmRlbGV0ZUJvb2sgPSBmdW5jdGlvbiAoZSwgYm9vaykge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJvb2tMaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRpZiAoYm9vay5pZCA9PT0gdGhpcy5ib29rTGlzdFtpXS5pZCkgdGhpcy5ib29rTGlzdC5zcGxpY2UoaSwgMSk7XG5cdFx0fVxuXHRcdHRoaXMubG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ2Jvb2tMaXN0JywgdGhpcy5ib29rTGlzdCk7XG5cdH07XG5cblx0Ym9va3NMaXN0Q3RybC5wcm90b3R5cGUuc29ydEJvb2tzID0gZnVuY3Rpb24gKGUsIHR5cGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdGlmICh0aGlzLnNvcnRUeXBlID09PSB0eXBlKSB7XG5cdFx0XHR0aGlzLnNvcnRSZXZlcnNlID0gIXRoaXMuc29ydFJldmVyc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuc29ydFR5cGUgPSB0eXBlO1xuXHRcdH1cblx0fTtcblxuXHRib29rc0xpc3RDdHJsLnByb3RvdHlwZS51cGRhdGVGcm9tSnNvbiA9IGZ1bmN0aW9uIChlKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0dGhpcy4kaHR0cC5nZXQoJy4vc3JjL2ZpeHR1cmVzL2Jvb2tzLmpzb24nKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG5cdFx0XHRfdGhpcy5sb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnYm9va0xpc3QnLCByZXNwLmRhdGEpO1xuXHRcdH0pO1xuXHR9O1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdDcmVhdGVCb29rQ3RybCcsIENyZWF0ZUJvb2tDdHJsKTtcblxuXHRDcmVhdGVCb29rQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGh0dHAnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICdsb2NhbFN0b3JhZ2VTZXJ2aWNlJ107XG5cblx0ZnVuY3Rpb24gQ3JlYXRlQm9va0N0cmwoJHNjb3BlLCAkaHR0cCwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIGxvY2FsU3RvcmFnZVNlcnZpY2UpIHtcblx0XHR0aGlzLiRzY29wZSA9ICRzY29wZTtcblx0XHR0aGlzLiRodHRwID0gJGh0dHA7XG5cdFx0dGhpcy4kc3RhdGUgPSAkc3RhdGU7XG5cdFx0dGhpcy5sb2NhbFN0b3JhZ2VTZXJ2aWNlID0gbG9jYWxTdG9yYWdlU2VydmljZTtcblxuXHRcdHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0Q3JlYXRlQm9va0N0cmwucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dGhpcy5ib29rID0gYW5ndWxhci5jb3B5KHRoaXMubG9jYWxTdG9yYWdlU2VydmljZS5nZXQoJ2VkaXRCb29rJykpO1xuXHR9O1xuXG5cdENyZWF0ZUJvb2tDdHJsLnByb3RvdHlwZS5zYXZlQm9va0NiID0gZnVuY3Rpb24gKG5ld0Jvb2spIHtcblx0XHR2YXIgYm9va3MgPSB0aGlzLmxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCdib29rTGlzdCcpO1xuXHRcdG5ld0Jvb2suaWQgPSAnXycgKyBib29rcy5sZW5ndGg7XG5cdFx0Ym9va3MucHVzaChuZXdCb29rKTtcblx0XHR0aGlzLmxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KCdib29rTGlzdCcsIGJvb2tzKTtcblx0XHR0aGlzLiRzdGF0ZS5nbygnbWFpbicpO1xuXHR9O1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0ZHJCb29rRWRpdG9yQ3RybC4kaW5qZWN0ID0gW1wiJHNjb3BlXCJdO1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignZHJCb29rRWRpdG9yQ3RybCcsIGRyQm9va0VkaXRvckN0cmwpO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5kaXJlY3RpdmUoJ2RyQm9va0VkaXRvcicsIGZ1bmN0aW9uICgpIHtcblx0XHRmdW5jdGlvbiBkckJvb2tFZGl0b3JMaW5rKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJHRpbWVvdXQpIHt9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0bGluazogZHJCb29rRWRpdG9yTGluayxcblx0XHRcdHJlc3RyaWN0OiAnQUVDJyxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdHRlbXBsYXRlVXJsOiAnLi9idWlsZC90ZW1wbGF0ZXMvZHJCb29rRWRpdG9yL2RyQm9va0VkaXRvci5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6IGRyQm9va0VkaXRvckN0cmwsXG5cdFx0XHRjb250cm9sbGVyQXM6ICdia0VkdHInLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjoge1xuXHRcdFx0XHRkYXRhOiAnPT8nLFxuXHRcdFx0XHRjdHg6ICc9Jyxcblx0XHRcdFx0bW9kZTogJ0A/Jyxcblx0XHRcdFx0c2F2ZUNiOiAnPT8nXG5cdFx0XHR9XG5cdFx0fTtcblx0fSk7XG5cblx0ZnVuY3Rpb24gZHJCb29rRWRpdG9yQ3RybCgkc2NvcGUpIHtcblx0XHR0aGlzLnN0YXR1cyA9ICdlZGl0Jztcblx0XHR0aGlzLiRzY29wZSA9ICRzY29wZTtcblxuXHRcdHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0ZHJCb29rRWRpdG9yQ3RybC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoIXRoaXMubW9kZSB8fCB0aGlzLm1vZGUgPT09ICdjcmVhdGUnKSB0aGlzLmRhdGEgPSB7XG5cdFx0XHRuYW1lOiBcIlwiLFxuXHRcdFx0YXV0aG9yczogW1tcIlwiLCBcIlwiXV0sXG5cdFx0XHRwYWdlczogXCJcIixcblx0XHRcdHB1Ymxpc2hpbmdfaG91c2U6IFwiXCIsXG5cdFx0XHRwdWJsaWNhdGlvbjogXCJcIixcblx0XHRcdGVkaXRpb246IFwiXCIsXG5cdFx0XHRpc2JuOiBcIlwiLFxuXHRcdFx0aW1hZ2U6IFwiXCJcblx0XHR9O1xuXHR9O1xuXG5cdGRyQm9va0VkaXRvckN0cmwucHJvdG90eXBlLnByb2Nlc3NGaWxlcyA9IGZ1bmN0aW9uIChmaWxlcykge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRhbmd1bGFyLmZvckVhY2goZmlsZXMsIGZ1bmN0aW9uIChmbG93RmlsZSwgaSkge1xuXHRcdFx0dmFyIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0ZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdFx0dmFyIHVyaSA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XG5cdFx0XHRcdF90aGlzLmRhdGEuaW1hZ2UgPSB1cmk7XG5cdFx0XHRcdF90aGlzLiRzY29wZS4kZGlnZXN0KCk7XG5cdFx0XHR9O1xuXHRcdFx0ZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGZsb3dGaWxlLmZpbGUpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdGRyQm9va0VkaXRvckN0cmwucHJvdG90eXBlLnNhdmVDYXJkID0gZnVuY3Rpb24gKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdGNvbnNvbGUubG9nKCctLS09PT0gdGhpcy5kYXRhID09PS0tLScsIHRoaXMuZGF0YSk7XG5cblx0XHRpZiAoIXRoaXMubW9kZSB8fCB0aGlzLm1vZGUgPT0gJ2NyZWF0ZScpIHtcblx0XHRcdHRoaXMuc2F2ZUNiLmNhbGwodGhpcy5jdHgsIHRoaXMuZGF0YSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuc2F2ZUNiLmNhbGwodGhpcy5jdHgpO1xuXHRcdH1cblx0fTtcblxuXHRkckJvb2tFZGl0b3JDdHJsLnByb3RvdHlwZS5kZWxldGVBdXRob3IgPSBmdW5jdGlvbiAoZSwgaWR4KSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHR0aGlzLmRhdGEuYXV0aG9ycy5zcGxpY2UoaWR4LCAxKTtcblx0fTtcblxuXHRkckJvb2tFZGl0b3JDdHJsLnByb3RvdHlwZS5hZGRBdXRob3IgPSBmdW5jdGlvbiAoZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0dGhpcy5kYXRhLmF1dGhvcnMucHVzaChbXCJcIiwgXCJcIl0pO1xuXHR9O1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdFZGl0Qm9va0N0cmwnLCBFZGl0Qm9va0N0cmwpO1xuXG5cdEVkaXRCb29rQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGh0dHAnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICdsb2NhbFN0b3JhZ2VTZXJ2aWNlJ107XG5cblx0ZnVuY3Rpb24gRWRpdEJvb2tDdHJsKCRzY29wZSwgJGh0dHAsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBsb2NhbFN0b3JhZ2VTZXJ2aWNlKSB7XG5cdFx0dGhpcy4kc2NvcGUgPSAkc2NvcGU7XG5cdFx0dGhpcy4kaHR0cCA9ICRodHRwO1xuXHRcdHRoaXMuJHN0YXRlID0gJHN0YXRlO1xuXHRcdHRoaXMubG9jYWxTdG9yYWdlU2VydmljZSA9IGxvY2FsU3RvcmFnZVNlcnZpY2U7XG5cblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdEVkaXRCb29rQ3RybC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcblx0XHR0aGlzLmJvb2sgPSBhbmd1bGFyLmNvcHkodGhpcy5sb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldCgnZWRpdEJvb2snKSk7XG5cdH07XG5cblx0RWRpdEJvb2tDdHJsLnByb3RvdHlwZS5zYXZlQm9va0NiID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKCctLS09PT0gY2FsbGJhY2sgPT09LS0tJyk7XG5cblx0XHR2YXIgYm9va3MgPSB0aGlzLmxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCdib29rTGlzdCcpO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYm9va3MubGVuZ3RoOyBpICs9IDEpIHtcblx0XHRcdGlmICh0aGlzLmJvb2suaWQgPT0gYm9va3NbaV0uaWQpIHtcblx0XHRcdFx0Ym9va3NbaV0gPSB0aGlzLmJvb2s7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMubG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ2Jvb2tMaXN0JywgYm9va3MpO1xuXHRcdHRoaXMubG9jYWxTdG9yYWdlU2VydmljZS5yZW1vdmUoJ2VkaXRCb29rJyk7XG5cdFx0dGhpcy4kc3RhdGUuZ28oJ21haW4nKTtcblx0fTtcbn0pKCk7XG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignbWFpbkN0cmwnLCBtYWluQ3RybCk7XG5cblx0bWFpbkN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJyRodHRwJywgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnYm9va1N0b3JlJywgJ2xvY2FsU3RvcmFnZVNlcnZpY2UnXTtcblxuXHRmdW5jdGlvbiBtYWluQ3RybCgkc2NvcGUsICRodHRwLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgYm9va1N0b3JlLCBsb2NhbFN0b3JhZ2VTZXJ2aWNlKSB7XG5cdFx0dGhpcy4kc2NvcGUgPSAkc2NvcGU7XG5cdFx0dGhpcy4kaHR0cCA9ICRodHRwO1xuXHRcdHRoaXMuJHN0YXRlID0gJHN0YXRlO1xuXHRcdHRoaXMuYm9va1N0b3JlID0gYm9va1N0b3JlO1xuXHRcdHRoaXMubG9jYWxTdG9yYWdlU2VydmljZSA9IGxvY2FsU3RvcmFnZVNlcnZpY2U7XG5cblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdG1haW5DdHJsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKCctLS09PT0gbWFpbkN0cmwgaW5pdCA9PT0tLS0nKTtcblx0XHR0aGlzLmdldEJvb2tzKCk7XG5cdH07XG5cblx0bWFpbkN0cmwucHJvdG90eXBlLmdldEJvb2tzID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRpZiAoIXRoaXMubG9jYWxTdG9yYWdlU2VydmljZS5nZXQoJ2Jvb2tMaXN0JykpIHtcblx0XHRcdHRoaXMuJGh0dHAuZ2V0KCcuL3NyYy9maXh0dXJlcy9ib29rcy5qc29uJykudGhlbihmdW5jdGlvbiAocmVzcCkge1xuXHRcdFx0XHRfdGhpcy5sb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnYm9va0xpc3QnLCByZXNwLmRhdGEpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xufSkoKTsiXX0=
